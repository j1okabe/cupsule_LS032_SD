# M5cupsule でシャープメモリ液晶LS032にBMPファイルを表示する
w336  h536 ピクセル

BMPファイルは色深度8bit(256色)で二値化加工済みであること。
画像編集ソフトにより白が1と0xFFのケースがあったので0ではないときに白とみなします。


## 必要なライブラリ

このプロジェクトでは、以下のライブラリが必要です。`platformio.ini` ファイルに記載されています。

- SD
- SdFat
- Adafruit BusIO
- Adafruit GFX Library
- EspEasyUtils
- OneButton

## セットアップ

1. [PlatformIO](https://platformio.org/) をインストールします。
2. このリポジトリをクローンします。
3. プロジェクトディレクトリで `platformio.ini` ファイルを確認し、必要な設定を行います。
4. Visual Studio Codeでプロジェクトを開きます。
5. 必要な拡張機能をインストールします（推奨される拡張機能は `.vscode/extensions.json` に記載されています）。

## ビルドとアップロード

1. プロジェクトディレクトリで以下のコマンドを実行してビルドします。

    ```sh
    pio run
    ```

2. ボードにアップロードするには、以下のコマンドを実行します。

    ```sh
    pio run --target upload
    ```

## 使用方法

1. ボードに電源を入れ、SDカードを挿入します。
2. ボードが起動し、SDカード内の `/img` ディレクトリから画像を読み込みます。
3. ボタンを押すことで画像を切り替えることができます。

## コードの概要

### main.cpp

- setup() 関数では、WiFiのOFF設定、ピンの設定、ボタンの設定、ディスプレイの初期化、SDカードのマウントを行います。
- loop() 関数では、ボタンの状態をチェックし、500msごとにディスプレイを更新します。
- drawBMP() 関数では、指定されたBMPファイルを読み込み、ディスプレイに表示します。

### Adafruit_SharpMemLS032.cpp

- refresh() 関数では、メモリ液晶の内容を更新します。この関数は、バッファ内のピクセルデータをディスプレイに転送し、表示を更新します。

## ライセンス

このプロジェクトはBSDライセンスの下でライセンスされています。
